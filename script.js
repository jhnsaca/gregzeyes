// --- TRANSLATION & DATA ---
const translations = {
    en: {
        "loader-name": "GREGOIRE THIBAUT",
        "nav-work": "Work", "nav-services": "Services", "nav-profile": "Profile", "nav-contact": "Contact",
        "nav-loc": "Based in France", "nav-avail": "Available Worldwide",
        "hero-title-2": "ARCHITECT", "hero-sub": "Photography & Art Direction",
        "section-work": "SELECTED WORKS",
        "section-profile-label": "02 — PROFILE",
        "profile-headline": "Gregoire <br>Thibaut",
        "profile-text": "“I approach this world through the impulse to create stories. To succeed in making an emotion live forever, through a single frozen image, or through several that, one after another, form a film — is an art in itself. That is the one I practice.”",
        "stat-projects": "Projects", "stat-global": "Global", "stat-reach": "Reach",
        "section-expertise": "EXPERTISE",
        "section-next": "04 — NEXT STEPS", "contact-cta": "LET'S BUILD<br>YOUR LEGACY",
        "btn-close": "CLOSE PROJECT", "btn-back": "BACK TO WORKS",
        // Project Titles/Desc in EN
        "pj-spontaneous-title": "SPONTANEOUS", "pj-spontaneous-desc": "The flower women / Bolivia 2024",
        "pj-shooting-title": "SHOOTING", "pj-shooting-desc": "Theater poster / France 2025",
        "pj-motion-title": "MOTION", "pj-motion-desc": "Kid's lesson / South Africa 2022",
        "pj-portrait-title": "PORTRAIT", "pj-portrait-desc": "Character / Brasil 2023",
        "pj-docu-title": "DOCUMENTARY", "pj-docu-desc": "Late for school / South Africa 2019",
        "pj-natural-title": "NATURAL ART", "pj-natural-desc": "Roommates / Namibia 2023",
        // Gallery items titles
        "work-1-title": "SPONTANEOUS", "work-1-desc": "The flower women / Bolivia 2024",
        "work-2-title": "SHOOTING", "work-2-desc": "Theater poster / France 2025",
        "work-3-title": "MOTION", "work-3-desc": "Kid's lesson / South Africa 2022",
        "work-4-title": "PORTRAIT", "work-4-desc": "Character / Brasil 2023",
        "work-5-title": "DOCUMENTARY", "work-5-desc": "Late for school / South Africa 2019",
        "work-6-title": "NATURAL ART", "work-6-desc": "Roommates / Namibia 2023",
        // Services
        "serv-1-name": "Photography", "serv-1-desc": "We freeze time to capture the raw essence of your brand.", "serv-1-tags": "Tags: Editorial / Portrait",
        "serv-2-name": "Video Production", "serv-2-desc": "Motion dictates emotion.", "serv-2-tags": "Tags: Commercial / Clips",
        "serv-3-name": "Content Creation", "serv-3-desc": "Designed for the scroll.", "serv-3-tags": "Tags: Reels / TikTok",
        "serv-4-name": "Community Mgmt", "serv-4-desc": "Building a cult following.", "serv-4-tags": "Tags: Strategy / Growth",
        "mail-subject": "Project Inquiry | Let's Create", "mail-body": "Hello Gregoire,\n\nI have seen your portfolio..."
    },
    fr: {
        "loader-name": "GREGOIRE THIBAUT",
        "nav-work": "Projets", "nav-services": "Services", "nav-profile": "Profil", "nav-contact": "Contact",
        "nav-loc": "Basé en France", "nav-avail": "Disponible Monde",
        "hero-title-2": "ARCHITECTE", "hero-sub": "Photographie & Direction Artistique",
        "section-work": "SÉLECTION",
        "section-profile-label": "02 — PROFIL",
        "profile-headline": "Grégoire <br>Thibaut",
        "profile-text": "« J'aborde ce monde par l'impulsion de créer des histoires. Réussir à faire vivre une émotion pour toujours, à travers une image figée, ou plusieurs qui, l'une après l'autre, forment un film — est un art en soi. C'est celui que je pratique. »",
        "stat-projects": "Projets", "stat-global": "Portée", "stat-reach": "Globale",
        "section-expertise": "EXPERTISE",
        "section-next": "04 — SUITE", "contact-cta": "BÂTISSONS<br>VOTRE HÉRITAGE",
        "btn-close": "FERMER PROJET", "btn-back": "RETOUR",
        // Project Titles/Desc in FR
        "pj-spontaneous-title": "SPONTANÉ", "pj-spontaneous-desc": "Les femmes fleurs / Bolivie 2024",
        "pj-shooting-title": "SHOOTING", "pj-shooting-desc": "Affiche de théâtre / France 2025",
        "pj-motion-title": "MOUVEMENT", "pj-motion-desc": "Leçon d'enfant / Afrique du Sud 2022",
        "pj-portrait-title": "PORTRAIT", "pj-portrait-desc": "Caractère / Brésil 2023",
        "pj-docu-title": "DOCUMENTAIRE", "pj-docu-desc": "En retard / Afrique du Sud 2019",
        "pj-natural-title": "ART NATUREL", "pj-natural-desc": "Colocataires / Namibie 2023",
        // Gallery items
        "work-1-title": "SPONTANÉ", "work-1-desc": "Les femmes fleurs / Bolivie 2024",
        "work-2-title": "SHOOTING", "work-2-desc": "Affiche de théâtre / France 2025",
        "work-3-title": "MOUVEMENT", "work-3-desc": "Leçon d'enfant / Afrique du Sud 2022",
        "work-4-title": "PORTRAIT", "work-4-desc": "Caractère / Brésil 2023",
        "work-5-title": "DOCUMENTAIRE", "work-5-desc": "En retard / Afrique du Sud 2019",
        "work-6-title": "ART NATUREL", "work-6-desc": "Colocataires / Namibie 2023",
        // Services
        "serv-1-name": "Photographie", "serv-1-desc": "Nous figeons le temps pour capturer l'essence brute.", "serv-1-tags": "Tags : Édito / Portrait",
        "serv-2-name": "Production Vidéo", "serv-2-desc": "Le mouvement dicte l'émotion.", "serv-2-tags": "Tags : Pub / Clips",
        "serv-3-name": "Création de Contenu", "serv-3-desc": "Conçu pour le scroll.", "serv-3-tags": "Tags : Reels / TikTok",
        "serv-4-name": "Community Mgmt", "serv-4-desc": "Bâtir un culte.", "serv-4-tags": "Tags : Stratégie / Croissance",
        "mail-subject": "Demande de Projet | Créons ensemble", "mail-body": "Bonjour Grégoire,\n\nJ'ai vu votre portfolio..."
    }
};

// --- PROJECT IMAGES DATABASE ---
const projectData = {
    "spontaneous": { titleKey: "pj-spontaneous-title", descKey: "pj-spontaneous-desc", images: ["assets/flower-women.jpg", "assets/bolivie-mural.jpg", "assets/portrait.jpg"] },
    "shooting": { titleKey: "pj-shooting-title", descKey: "pj-shooting-desc", images: ["assets/studio.jpg", "assets/lau-cygne.jpg", "assets/lau-robe.jpg"] },
    "motion": { titleKey: "pj-motion-title", descKey: "pj-motion-desc", images: ["assets/enfant-as.jpg", "assets/african-kids.jpg", "assets/chili-village.jpg"] },
    "portrait": { titleKey: "pj-portrait-title", descKey: "pj-portrait-desc", images: ["assets/portrait.jpg", "assets/flower-women.jpg"] },
    "documentary": { titleKey: "pj-docu-title", descKey: "pj-docu-desc", images: ["assets/african-kids.jpg", "assets/walking-red.jpg"] },
    "natural": { titleKey: "pj-natural-title", descKey: "pj-natural-desc", images: ["assets/giraffe2.jpg", "assets/lau-cygne2.jpg"] }
};

let currentLang = 'en';

// --- FUNCTIONS ---
function setLanguage(lang) {
    currentLang = lang;
    const elements = document.querySelectorAll('[data-i18n]');
    
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) el.innerHTML = translations[lang][key];
    });

    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if(btn.textContent.toLowerCase() === lang) btn.classList.add('active');
    });

    // Update Mailto
    const mailBtn = document.getElementById('dynamic-mail-btn');
    if(mailBtn) {
        const subject = encodeURIComponent(translations[lang]["mail-subject"]);
        const body = encodeURIComponent(translations[lang]["mail-body"]);
        mailBtn.href = `mailto:gregoirethibautpro@gmail.com?subject=${subject}&body=${body}`;
    }
}

document.addEventListener('DOMContentLoaded', () => {
    setLanguage('en');

    // Loader
    const loaderScreen = document.querySelector('.loader-screen');
    const fill = document.querySelector('.loader-bar-fill');
    const percentText = document.querySelector('.loader-percentage');
    let loadProgress = 0;
    const interval = setInterval(() => {
        loadProgress += Math.floor(Math.random() * 3) + 1;
        if (loadProgress > 100) loadProgress = 100;
        fill.style.width = `${loadProgress}%`;
        percentText.textContent = `${loadProgress}%`;
        if (loadProgress === 100) {
            clearInterval(interval);
            setTimeout(() => {
                loaderScreen.classList.add('complete');
                document.body.classList.remove('loading-active');
            }, 500);
        }
    }, 20);

    // Navigation & Logic
    const burger = document.querySelector('.burger-menu');
    const logo = document.getElementById('logo-trigger');
    const menuLinks = document.querySelectorAll('.menu-link');
    
    burger.addEventListener('click', () => document.body.classList.toggle('menu-active'));
    menuLinks.forEach(link => link.addEventListener('click', () => document.body.classList.remove('menu-active')));
    
    window.addEventListener('scroll', () => {
        logo.style.opacity = (window.scrollY > 100) ? '0.3' : '1';
        
        // Parallax
        const parallaxImg = document.querySelector('.parallax-img');
        if(parallaxImg && window.scrollY < window.innerHeight) {
            parallaxImg.style.transform = `translateY(${window.scrollY * 0.4}px)`;
        }
    });

    // Cursor
    const dot = document.querySelector('.cursor-dot');
    const circle = document.querySelector('.cursor-circle');
    window.addEventListener('mousemove', (e) => {
        dot.style.left = `${e.clientX}px`; dot.style.top = `${e.clientY}px`;
        circle.style.left = `${e.clientX}px`; circle.style.top = `${e.clientY}px`;
    });
    
    document.querySelectorAll('a, .service-item, .gallery-item, .lang-switcher, .project-close-btn').forEach(el => {
        el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
        el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
    });

    // Services Hover
    const serviceItems = document.querySelectorAll('.service-item');
    const serviceBg = document.getElementById('service-bg');
    serviceItems.forEach(item => {
        item.addEventListener('mouseenter', () => {
            serviceBg.style.backgroundImage = `url(${item.getAttribute('data-image')})`;
            serviceBg.classList.add('active');
        });
    });

    // --- PROJECT VIEWER LOGIC ---
    const projectViewer = document.getElementById('project-viewer');
    const pjTitle = document.getElementById('pj-title');
    const pjDesc = document.getElementById('pj-desc');
    const pjGrid = document.getElementById('pj-grid');
    const closeButtons = document.querySelectorAll('.project-close-btn');
    const curtain = document.querySelector('.curtain');

    document.querySelectorAll('.project-trigger').forEach(item => {
        item.addEventListener('click', () => {
            const category = item.getAttribute('data-category');
            const data = projectData[category];

            if(data) {
                curtain.classList.remove('exit');
                curtain.classList.add('active');

                setTimeout(() => {
                    // Inject Text based on current language
                    pjTitle.textContent = translations[currentLang][data.titleKey];
                    pjDesc.textContent = translations[currentLang][data.descKey];
                    pjGrid.innerHTML = ''; 

                    // Inject Images
                    data.images.forEach((imgSrc, index) => {
                        const img = document.createElement('img');
                        img.src = imgSrc;
                        img.className = 'pj-img';
                        img.style.animationDelay = `${index * 0.1}s`;
                        if ((index + 1) % 3 === 0) img.classList.add('full-width');
                        pjGrid.appendChild(img);
                    });

                    projectViewer.classList.add('active');
                    document.body.style.overflow = 'hidden'; 
                }, 500);

                setTimeout(() => {
                    curtain.classList.remove('active');
                    curtain.classList.add('exit');
                }, 1000);
            }
        });
    });

    closeButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            curtain.classList.remove('exit');
            curtain.classList.add('active');
            setTimeout(() => {
                projectViewer.classList.remove('active');
                document.body.style.overflow = 'auto'; 
            }, 500);
            setTimeout(() => {
                curtain.classList.remove('active');
                curtain.classList.add('exit');
            }, 1000);
        });
    });
});
